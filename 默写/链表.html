<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>链表</title>
</head>

<body>
    <script>
        function defaultEquals(a, b) {
            return a === b
        }
        class Node {
            constructor(element, next) {
                this.element = element
                this.next = next
            }
        }
        class LinkedList {
            constructor(equalsFn = defaultEquals) {
                this.equalsFn = equalsFn
                this.count = 0  //length
                this.head = undefined //头部
            }
            push(element) {
                const node = new Node(element)
                if (this.head == null) {
                    this.head = node
                } else {
                    // 开始循环
                    let current = this.head
                    while (current.next != null) {
                        current = current.next;
                    }
                    current.next = node;
                }
                this.count++
            }
            // 根据元素索引拿位置
            getElementAt(index) {
                if (index >= 0 && index < this.count) {
                    let node = this.head
                    let i = 0
                    while (i < index) {
                        node = node.next
                        i++
                    }
                    return node
                }
                return undefined
            }
            // 根据索引移除元素
            removeAt(index) {
                if (index >= 0 && index < this.count) {
                    let current = this.head
                    // 移除第一个元素
                    if (index === 0) {
                        this.head = current.next
                    } else {
                        const previous = this.getElementAt(index - 1)
                         current = previous.next
                        previous.next = current.next
                    }
                    this.count--
                    return current.element;
                }
                return undefined
            }
            // 返回一个元素在链表中的位置
            indexOf(element) {
                let current = this.head
                let i = 0
                while (i < this.count) {
                    if (this.equalsFn(element, current.element)) {
                        return i
                    }
                    current = current.next
                    i++
                }
                return -1

            }
            // 从链表中移除元素
            remove(element) {
                return this.removeAt(this.indexOf(element))
            }
            //从任意位置插入元素
            inset(element, index) {
                if (index >= 0 && index <= count) {
                    let node = new Node(element)
                    if (index === 0) {
                        let next = this.head
                        node.next = next
                        this.head = node
                    } else {
                        const previous = this.getElementAt(index - 1)
                        node.next = previous.next
                        previous.next = node
                    }
                    this.count++
                    return true
                }
                return false
            }
        }
        let list = new LinkedList()
        list.push('11')
        list.push('12')
        list.push('13')
        console.log(list.indexOf('111'))
    </script>
</body>

</html>